{"componentChunkName":"component---src-templates-blog-post-js","path":"/jsproto/","result":{"data":{"site":{"siteMetadata":{"title":"Ian Chu","author":"Ian Chu","siteUrl":"https://ianccy.com","social":{"facebook":"chu1228"}}},"markdownRemark":{"id":"cfdf141e-54a5-59a0-bd50-0b0021e2763a","fields":{"slug":"/2018-08-jsproto/"},"headings":[{"value":"JavaScript ProtoType 介紹","id":"javascript-prototype-介紹","depth":2},{"value":"JavaScript ProtoType 繼承鍊","id":"javascript-prototype-繼承鍊","depth":2}],"excerpt":"因緣際會之下，最近剛經歷了招募前端，為了準備面試題目，所以整理了一些關於 JavaScript 的 觀念，其中比較抽象的題目應該是 ProtoType、Event loop、Bubbles Capture，這邊就先來介紹一下其中最抽象也比較難理解的 JavaScript ProtoType。 JavaScript…","html":"<p>因緣際會之下，最近剛經歷了招募前端，為了準備面試題目，所以整理了一些關於 JavaScript 的 觀念，其中比較抽象的題目應該是 ProtoType、Event loop、Bubbles Capture，這邊就先來介紹一下其中最抽象也比較難理解的 JavaScript ProtoType。</p>\n<!--- ![JavaScript](../images/JavaScript-logo.png \"JavaScript\") --->\n<h2 id=\"javascript-prototype-介紹\" style=\"position:relative;\"><a href=\"#javascript-prototype-%E4%BB%8B%E7%B4%B9\" aria-label=\"javascript prototype 介紹 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScript ProtoType 介紹</h2>\n<p>JavaScript 沒有類的特性(class-based)，跟 Java 不一樣，雖然說 ES6 有 class 但它只是語法糖，每個 JavaScript 都具備有 prototype，只是分為公開、私有差異，而 JavaScript 就用 prototype 來處理繼承(prototype-based)，特性是延展性高。</p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">// 使用解構復值作為參數  並且預設沒傳值預設給予字串\nfunction Family({ m = &#39;no person&#39;, w = &#39;no person&#39;, c = &#39;no child&#39; } = {}) {\n    this.father = m;\n    this.mother = w;\n    this.chidren = c;\n}\n\nvar data = {\n    m: &#39;John Paul&#39;,\n    w: &#39;Mary Alice&#39;,\n    c: &#39;Chris Paul&#39;\n};\n\n// 繼承 Family\nvar paul = new Family(data);\n// 等同於\n// var paul[[Prototype]] = Family.prototype;\n// Family.call(paul);\n// paul 的 __proto__ 等於 Family();\n\nconsole.log(paul);\n// chidren: &quot;Chris Paul&quot;\n// father: &quot;John Paul&quot;\n// mother: &quot;Mary Alice&quot;</code>\n        </deckgo-highlight-code>\n<p><a href=\"https://codepen.io/chu1228/pen/KxVoVz?editors=0001\" title=\"example codepen\">example codepen</a></p>\n<p>console.log(paul) 截圖<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9d729db33e71b78be6b0afd2aec203a5/b5128/family_proto.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 793px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 39.7979797979798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA50lEQVQY05WR62rDMAyF8/4vuB9jzZqspGkTO45j3Xyr2g62bmWwgyw+jHUORg2Ofngd3nbDYte0eTaWkeO6srUiEr3ndYWwMXOttTyq4YWG7nQ2k3Cs/1Tj7bbsPqjv8837bl4/q37j8mR48c5ORziNkTg9ffJHcvvevbS7dt9Ns3HTTIgskpgzURIhZu3KUSH/dG7A49wbOxyh78SYKAKIWQtALZQTUQGIOp9/JQuI2TsYz+FwwBByKTnnpKfWa8/XuFSKckqpPH6r0X0EE8DhbKxzTleCiGHb9P4KIdwBAIjo5vmlCxQq01NIRkGqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/9d729db33e71b78be6b0afd2aec203a5/a805d/family_proto.webp 495w,\n/static/9d729db33e71b78be6b0afd2aec203a5/75156/family_proto.webp 793w\"\n          sizes=\"(max-width: 793px) 100vw, 793px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/9d729db33e71b78be6b0afd2aec203a5/b3db0/family_proto.png 495w,\n/static/9d729db33e71b78be6b0afd2aec203a5/b5128/family_proto.png 793w\"\n          sizes=\"(max-width: 793px) 100vw, 793px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/9d729db33e71b78be6b0afd2aec203a5/b5128/family_proto.png\"\n          alt=\"JavaScript proto\"\n          title=\"family proto.proto\"\n          src=\"/static/9d729db33e71b78be6b0afd2aec203a5/b5128/family_proto.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">family proto.proto</figcaption>\n  </figure>\n      </p>\n<p>接下來擴充一下 Family，增加一個 function。</p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">// 增加一個 hi function\nFamily.prototype.hi = function() {\n    console.log(`Family&#39;s child is ${this.chidren}. Family&#39;s father is ${this.father}`);\n};\n\n// this 指向調用時的物件 paul\npaul.hi();\n// I am Chris Paul. My father is John Paul</code>\n        </deckgo-highlight-code>\n<p><a href=\"https://codepen.io/chu1228/pen/rZxdxm?editors=0011\" title=\"example codepen\">example codepen</a></p>\n<p>JavaScript ProtoType 用來建立 function 也較不耗費記憶體，當我今天有多個的不同物件要產生，就不需要實際複製產生，而是轉向繼承核心的 function 使用 prototype，這特色在 es6 class 撰寫時會滿明顯感受。</p>\n<h2 id=\"javascript-prototype-繼承鍊\" style=\"position:relative;\"><a href=\"#javascript-prototype-%E7%B9%BC%E6%89%BF%E9%8D%8A\" aria-label=\"javascript prototype 繼承鍊 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScript ProtoType 繼承鍊</h2>\n<p>每個物件都有一個連著其他原型（prototype）的私有屬性（private property）物件。原型物件也有著自己的原型，於是原型物件就這樣鏈結，直到撞見 null 為止。看範例可能會比較好理解，</p>\n<p>另外會發現到物件第一層會是 <code class=\"language-text\">__proto__</code> (隱式原型)，主要是瀏覽器會透過隱式原型指向該物件的 prototype。</p>\n<p>ps. <code class=\"language-text\">__proto__</code>稱為隱式原型) 與 prototype 顯式原型。</p>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dd888ee3b72358c823a8a87cf461f552/c9773/chain.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 520px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 112.72727272727272%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAPoAAAD6AG1e1JrAAAC2UlEQVQ4y21U6W6cMBDe93+xRPkRKVWjtBt20+Uwhw9sgzmMHfphIzapOmIRCzOe7xj7tIb43MN7v9bV8Pz86+Hhx+vPW6dX7z+RgA8vLy9PT0+Pj4+c81hyWr+Hc6sQTnDL+VCWUklr7RIXbpomz/Msy/q+vxdj1a7r2rYVQoyjpc3EuWXU1LWW0jrnl2VxziH7n04nvNJaU0pbpYTgfT82zUAp6hdGJ1zDMCqltO6QZoyxIfZiLAkOgDS1Aq3n2SndkyxNzr85Z4Q0Uuqu04AKzEir6xowgWUrxg9PA0Ipa+dpcjWVLMvJ+dKqnhDatgqEQAo9QPj9/R3sIoXTofY0o3I0ZqpKwLZSrYItUnpw9rhByXWdpilivhfj4ziOm0tBbdijpJetV3J7OGRCAsij/lvxDKLeG9MDT12z243DKikXSo1WDkrHVDRnjJlhwF9n7W6VDVxFqyuoUdM8V00zEiKKgks5B9g+ihx1WuycXS8YqL2zhCYS9WocZ8ZmRkfBrOALZ7MxQ0SLNEIICMK3qqoAZC+GB2VJlmW21guhb7c8uXyUW1AhpNYK9gBzkiR4BeXB8c45COrDsxOiT27m7cwKUtUV17pHAnwuigJWox7c7j7j2zF6eInxhGBViWzdigWwpZRAjgKkYZVD8P8Uy/YTF9jSZmjFvjEOe4ARsxzrd7XjDMTiVsBh1zTwLEuSa1lWEWQsRjKAoN99PL8Wo62Sn32HVRxgQwtAPbp9RfqfzthJwMyZxQXYOAyQjfVNCGwC3HfOWC9N0+v1CuvC9EJtnabZx8cfQkoMHGMCP0CFSdgYSMbevG9JeAjr48TD56rml8v19fXtlqZFXmFXYcOgOA1xPp/vxVAvso80ABvHAKwqChU4u7BZN6uiT1jl4LhbZcOg4wCEl1AbWwqEYTh0jdriW2C+fFX3FHvGYwxDavpxO33YphkemmZrhYZjiDnEMRR/ATAoJxk/H6GAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/dd888ee3b72358c823a8a87cf461f552/a805d/chain.webp 495w,\n/static/dd888ee3b72358c823a8a87cf461f552/91cf4/chain.webp 520w\"\n          sizes=\"(max-width: 520px) 100vw, 520px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/dd888ee3b72358c823a8a87cf461f552/b3db0/chain.png 495w,\n/static/dd888ee3b72358c823a8a87cf461f552/c9773/chain.png 520w\"\n          sizes=\"(max-width: 520px) 100vw, 520px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/dd888ee3b72358c823a8a87cf461f552/c9773/chain.png\"\n          alt=\"JavaScript protochain\"\n          title=\"family protochain\"\n          src=\"/static/dd888ee3b72358c823a8a87cf461f552/c9773/chain.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">family protochain</figcaption>\n  </figure>\n      </p>\n<p>簡單的範例</p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">var Person = function() {\n    this.name = `chu`;\n};\n\nvar Age = function() {\n    this.age = 18;\n};\n\nvar Gender = function() {\n    this.gender = &#39;male&#39;;\n};\n\nAge.prototype = new Person();\n\nGender.prototype = new Age();\n\nvar ian = new Gender();\nconsole.log(ian.name, ian.age, ian.gender); // chu 18 male\n// 會先查找 ian 的 name ，找不到找該物件的原型prototype，\n// 在找不到會在往上層去找 prototype.name 就會發現找到了停止向上查找\n// 直到找不到 prototype ，__proto__為null時停止\n// 整個流程稱之為 prototype chain</code>\n        </deckgo-highlight-code>\n<p><a href=\"https://codepen.io/chu1228/pen/LJGdGm?editors=0011\" title=\"example codepen\">example codepen</a></p>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70252470187f8e2a68defb1bb45a8ec1/acfc1/protochain.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 39.5959595959596%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAAtUlEQVQY042Q3Q6CMAyFef/3w2uixO4HtrWT1QobLsbEGBX5btqL056c08QYBxgHUOy9sJT1C6UU7/3wwBijlLLWMnMjcr3YFDQGDOWhq6w7qLJGbiLphudwTbzkvCH9pDpLzplMnEb2Do01RLQsyz5nkTpQIUEN707Hvus651ztYvvF65g0BU3nHkbnq3NK6W/y53HdyMbQI5MAmEPbAkD+nf+tsJLLFCYOHCkprRFxnuc9zndhItPycivTkwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/70252470187f8e2a68defb1bb45a8ec1/a805d/protochain.webp 495w,\n/static/70252470187f8e2a68defb1bb45a8ec1/6ec60/protochain.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/70252470187f8e2a68defb1bb45a8ec1/b3db0/protochain.png 495w,\n/static/70252470187f8e2a68defb1bb45a8ec1/acfc1/protochain.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/70252470187f8e2a68defb1bb45a8ec1/acfc1/protochain.png\"\n          alt=\"JavaScript protochain\"\n          title=\"family protochain\"\n          src=\"/static/70252470187f8e2a68defb1bb45a8ec1/acfc1/protochain.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">family protochain</figcaption>\n  </figure>\n      </p>\n<p>突然提到 prototype，主要是在 React 開發時，時常用到 ES6 class，才知道 class 背後處理了非常關於 prototype 繼承的細節。才知道 prototype 的概念形影不離。</p>\n<p>例如一個簡單的 class 如下</p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">class Person {\n    constructor(name) {\n        this.name = name;\n    }\n    hello() {\n        console.log(`hello,i am ${this.name}`);\n    }\n}\nclass Age extends Person {\n    // constructor會在建立時倍呼叫\n    // 接受傳遞參數\n    constructor(name, age) {\n        // 繼承父層 prototype.name\n        super(name);\n        this.age = age;\n    }\n    intro() {\n        console.log(`i am ${this.name}, and ${this.age} years old,`);\n    }\n}\n\nconst ian = new Age(`chu`, 18);\nian.intro(); // i am chu, and 18 years old,\nian.hello(); // hello,i am chu</code>\n        </deckgo-highlight-code>\n<p><a href=\"https://codepen.io/chu1228/pen/dqGZxB?editors=0011\" title=\"example codepen\">example codepen</a></p>\n<p>如果你有用過 react 的 class xxx extends React.component，就會發現到其中 super(props)，就在講繼承 React.component 的 props。es6 class 就先不在這邊講述了，</p>\n<p>以上就是 prototype 的簡單介紹，有錯誤或是問題歡迎留言。</p>","frontmatter":{"title":"JavaScript Prototype 繼承、原型鏈 Prototype chain","date":"August 25, 2018","description":"JavaScript沒有類的特性(class-based)，跟Java不一樣，雖然說ES6 有class但它只是語法糖，每個JavaScript都具備有prototype，只是分為公開、私有差異，而JavaScript就用prototype來處理繼承(prototype-based)，特性是延展性高。","categories":"javascript","tags":["javascript","prototype"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABvklEQVQoz2N4c80eE727YX9hr/XeNZb3T9sC2Z/vOFw/bLNxkfmuVRbPL4G4r6+ClDFg6nx1xf7rPYecZF0xcUWghv/PnVbMMtPXUxWTUJKUVvZ01Ti32/rjLZB+nJozk3QFhRW3LDUH2mxmqq6krNzXZJSZqAs0Zc8aC6DlQGV4NYso7lhh8eC0LVCntYX6p3sO3584ArmEnQ3ULCSquHmx+bf7Dr6emkBXeLtpLp5qClTw+a7DK4KahUUVNyw0//fM8dR2K083TQEhRT5BRVcnjeNbrUD60ZwNNO/DLQeQ2XccssCaN4Ft/vXIEejOJdNM/b00gYLuzprPLtq9vY6kGSj95a7DjSM2T87Z/X/lBLEZGNo/HzpuX25x94Tt/y8uH247AG1WUlI+tsUKqJgB2anblpmrqatkJ+uunmNmYaYmK6d8cZ/NsummvPwKQb5aa+ebz+g20dJU1dNVvX7EBhhbDHAHf7ztcHqnlZO9hrCokoCwIjBWizL1IckjNkxHXFIJGGZAcUVF5cntxl/Q/PwK7OzH5+yWTjcFSm9eYg70FVAcaMP7Gw47VlpM6zKe1WtyYps1UNlrsBYA70hbAl6wB1gAAAAASUVORK5CYII=","aspectRatio":1.8888888888888888,"src":"/static/e0505dfa26d1f0856cca4d8ca2e3fb29/997ff/JavaScript-logo.png","srcSet":"/static/e0505dfa26d1f0856cca4d8ca2e3fb29/c972b/JavaScript-logo.png 340w,\n/static/e0505dfa26d1f0856cca4d8ca2e3fb29/27625/JavaScript-logo.png 680w,\n/static/e0505dfa26d1f0856cca4d8ca2e3fb29/997ff/JavaScript-logo.png 796w","sizes":"(max-width: 796px) 100vw, 796px"}}}},"timeToRead":3,"parent":{"__typename":"File","modifiedTime":"2021-05-16T05:03:08.908Z"}}},"pageContext":{"slug":"/2018-08-jsproto/","previous":{"fields":{"slug":"/2018-07-gasession/"},"frontmatter":{"title":"Google Analytics 工作階段介紹、定義","tags":["google_analytics"]}},"next":{"fields":{"slug":"/2018-08-tagmanager/"},"frontmatter":{"title":"Google Tag Manager tracking code 安裝追蹤碼","tags":["tag_manager","google_analytics"]}}}},"staticQueryHashes":["1481458783","63159454"]}