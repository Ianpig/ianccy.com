{"componentChunkName":"component---src-templates-blog-post-js","path":"/gauserid/","result":{"data":{"site":{"siteMetadata":{"title":"Ian Chu","author":"Ian Chu","siteUrl":"https://ianccy.com","social":{"facebook":"chu1228"}}},"markdownRemark":{"id":"dce9691e-01b6-582f-a6a5-a6d22a869be8","fields":{"slug":"/2019-06-gauserid/"},"headings":[{"value":"GA 設定 User ID","id":"ga-設定-user-id","depth":2},{"value":"針對使用者設定 UserId","id":"針對使用者設定-userid","depth":2},{"value":"Tag manager 設定流程","id":"tag-manager-設定流程","depth":3},{"value":"實際模擬 UserId 設定","id":"實際模擬-userid-設定","depth":2},{"value":"Google analytics 報表","id":"google-analytics-報表","depth":2},{"value":"心得","id":"心得","depth":2}],"excerpt":"分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。 Goolge 說明: 設定 User ID GA 設定 User ID GA…","html":"<p>分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。</p>\n<p>Goolge 說明: <a href=\"https://support.google.com/analytics/answer/3123666?hl=zh-Hant\" title=\"設定 User ID\">設定 User ID</a></p>\n<h2 id=\"ga-設定-user-id\" style=\"position:relative;\"><a href=\"#ga-%E8%A8%AD%E5%AE%9A-user-id\" aria-label=\"ga 設定 user id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GA 設定 User ID</h2>\n<p>GA 點選左下角設定 => 點選 追蹤設定 => 點選 User Id => 點擊 同意條款 => 點選 下一步<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 43.63636363636364%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+UlEQVQoz42Q/W6DIBTFff+H6jNs8bOyxMWJorapAhqBWnaQrKv9pz25IQjnh+feQEiJUkr70sa4cjKPhRtXalcBnMuyWGtvkL1JKadpWtf1+ie/9wa7VzDPsxDCO5RS+PwipKqqtm27rsPKmoYxVlOKQ+TZwWBGzu8wrtM0zfM8yzKsSZLEcRxFURhGRVH4CP8w0lzOJ7MJMFoAAz7cBJgQghOQlFIY9rC1PWuGYfCwNtey/IEb1rqu+74fN6E1eJ7/jMAjcnOunPQsL11LuRB+PFjvY4OeB4Yn8TBadRajjyX/bviG2ZcKgKFPZHbAag4f589CvAn/AmPTBaWSrbEIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/a4dfd573d871922286d5fe915a26c191/a805d/gasettinguid.webp 495w,\n/static/a4dfd573d871922286d5fe915a26c191/6ec60/gasettinguid.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/a4dfd573d871922286d5fe915a26c191/b3db0/gasettinguid.png 495w,\n/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png\"\n          alt=\"gasettinguid\"\n          title=\"gasettinguid\"\n          src=\"/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure>\n      </p>\n<p>建立 User Id 報表<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 63.43434343434343%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABgUlEQVQoz5WS2W6CUBRF/f9P0vigdXzQGOPAIDgRi4iCjIpAu3JvrJK0D90JJ0e46wz7Wttd0k/XD4NrmqZf/1TNCe+W7ZwcJwzDIAiu1yvJ5XIhj6LI9/3b7fYnzBPHseu65/PZ8zwiQJIkqRDJ/X7PsuzxFHlZli94vV43m81erzccDrvd7mg0UlV1sVgYhrFarebzOcl0OiVZLpfkFdg0zcFgMB6P2+12q9WiRL1ebzQa5FQkLp6ihK7rFdiyrH6/DzyZTGazmaZp2+12v9/Tdie02Wxs25amsFRRFC/YcRzmoaSiKABgnhD74wWnI6FQCEcr8PF4ZBMYlpc8zQ+HA0VpiPOy5+8whzgNCUYV3CLy8nQ60R/D4zfBV2AOQUqM9Zhfuo3IfSG5iCeSF4x1TIJndOCtvElinuf8zCt6FDmfqvesqNpHp8Pk3Bk9sZdBsJCLlRMRdV3TVoZi7m3Hff+HlTM7Ue3olsSeMJYRAiEmkgvLGMZJkD6yR/EDfwO9NdCvlVQj9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/a805d/gasettinguid2.webp 495w,\n/static/5a7cebbd6db9e4581aaa4402d4d0a360/6ec60/gasettinguid2.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/b3db0/gasettinguid2.png 495w,\n/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png\"\n          alt=\"gasettinguid\"\n          title=\"gasettinguid\"\n          src=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure>\n      </p>\n<p>打開 顯示 User-id<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 54.34343434343434%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzElEQVQoz5WRyxKCIBiFff9H6F3a1hO4aqdmColJIMm1I47dphr9FgzM8HnOL4kxhhKa53lVVYSQruustWEZiXOOMQZTCgmzadgK2XtfRB6OjyyVKaWcc+cd9m5mqVyWpVJKyrE2Nr+u+q+ykJK1rdZ66hwWM/6wpj4BNEd4PyMEvimnFXW4UBeuhhjwlJV2mx3JqrM1+hYZBtzRryueU93MtbfWvfVKcE4zUtdIxsgd5BW1MeORhYIFJEyv5f/ykRy2qd4fLOZEybCGO5+qhkdXQqqaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/406223a191ae9878e9c07cd43fe7e3db/a805d/gauserid3.webp 495w,\n/static/406223a191ae9878e9c07cd43fe7e3db/6ec60/gauserid3.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/406223a191ae9878e9c07cd43fe7e3db/b3db0/gauserid3.png 495w,\n/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png\"\n          alt=\"gasettinguid\"\n          title=\"gasettinguid\"\n          src=\"/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure>\n      </p>\n<p>這邊千萬千萬要記得要打開 UserId 的設定，否則你報表看不到客製化的 UserId 數據。我在這邊卡了 2 小時，查網路還找不到如何顯示的教學…。</p>\n<h2 id=\"針對使用者設定-userid\" style=\"position:relative;\"><a href=\"#%E9%87%9D%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E8%A8%AD%E5%AE%9A-userid\" aria-label=\"針對使用者設定 userid permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>針對使用者設定 UserId</h2>\n<p>接下來就需要定義使用者的 UserId，這邊有時候會用會員編號，不要使用敏感性個資去設定即可，能讓你在報表識別出這個人是誰就可以。</p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">// 全域網站代碼的追蹤程式碼 (gtag.js)：\ngtag(&#39;set&#39;, {&#39;user_id&#39;: &#39;USER_ID&#39;}); // 使用已登入的 user_id 設定 User ID。\n\n\n// 通用 Analytics (分析) 追蹤程式碼 (analytics.js)：\nga(&#39;set&#39;, &#39;userId&#39;, &#39;USER_ID&#39;); // 使用已登入的 user_id 設定 User ID。</code>\n        </deckgo-highlight-code>\n<h3 id=\"tag-manager-設定流程\" style=\"position:relative;\"><a href=\"#tag-manager-%E8%A8%AD%E5%AE%9A%E6%B5%81%E7%A8%8B\" aria-label=\"tag manager 設定流程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tag manager 設定流程</h3>\n<p>稍微提一下 tag manager 設定流程，首先我們需要建立一個變數，因為我 userId 是透過 cookie 傳遞的，所以我這邊先打開<code class=\"language-text\">變數</code>，點選使用者自定義區塊 -> 點選新增。</p>\n<ul>\n<li>選擇自訂 JavaScript<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 34.74747474747475%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA1klEQVQY042Pyw7CIBBF+f8vsVSKlrbUtcbGZ7/BLlyYviAWTIDqJKa1bow3N2TukAMzaBmGIWPRqDiOommKSRDkea6VKsvSWvsc5JxDhBCA4yR5+/3MGBPOMcbr7UF0pne2/xZijK3SNOUcDIXn+XSxmHawj7PdUd4fSnUAPCdCMDbnPBnkzSldfjpQALzJ9rdKaq2Nta7v3SA0J2Rq/zvCwjNvts4Ol2tVFEUjZN20cDataIVEcP3DAaUAb/fnWmrV3eFjY8xn57/g3akSSooWSJh2hF+uak2Iw1YqSwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/a805d/gtmuid.webp 495w,\n/static/9ae56bc7af51877a85929e0cf8f8ee52/6ec60/gtmuid.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/b3db0/gtmuid.png 495w,\n/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png\"\n          alt=\"gtm uid\"\n          title=\"gtm uid\"\n          src=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">gtm uid</figcaption>\n  </figure>\n      </li>\n<li>function return 代表的是這個變數的值。<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.38383838383838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAAz0lEQVQoz42SjW7DIAyE8/5v2qUt4B9MDCG7LmulJVna0wnJxp+wbIZpmkKM7t6Xpffe5vmtH+q91jpoKZE4sSSilCLuvNZzS84rMqj9wqKm5q01vL+cKj+RF8xqU2AXYTS1FvUjIbuFI4kVM8q3EaGE+12JGgbxt4s1PICR8uIxGELLGYOcW9s0fALbvvpDmK2Ut6P6F0YKo56fOtxw/SlQs92qRMcrdPsaR+x8LT205i3MYn4JJQT8t4SDiGtte0P7PQtrxtA+MYk+fiTLNyVfu6D2/LfuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/df6fcfaf41b9e489faa3d94e8990710a/a805d/gtmuidvar.webp 495w,\n/static/df6fcfaf41b9e489faa3d94e8990710a/6ec60/gtmuidvar.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/df6fcfaf41b9e489faa3d94e8990710a/b3db0/gtmuidvar.png 495w,\n/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png\"\n          alt=\"gtm uid js\"\n          title=\"gtm uid js\"\n          src=\"/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">gtm uid js</figcaption>\n  </figure>\n      </li>\n<li>點選 <code class=\"language-text\">代碼</code> -> 新增/編輯 GA pageView -> 點選 覆蓋變數設定 -> 點選 更多設定 -> 填入 userId 還有剛剛設定的 變數名稱<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.82828282828282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+0lEQVQoz41S25aDIAzs/3+mT3tWEUkghHLpjrKn23rU7TyIRoaZSbiN02SMwWMYBjOviDG2DY9z1NZKKTcfIvkQwNC029EOUSt+aUrW0c0xW+dEtCiRW6xdsADMjLPbCSDVyR5LECl3UVWJMaVUNlw4V/1V9gsxe4/YdbPUDT8u8bQNZQ4SvF+PIKJ7zvW/hv2RHZHl+DXRPJvvcRSJW1/qR2TYdizGskiAbA/8uW3CpFZmWqcFzbS9tKPwvfBGRvdyzmj1tdtjZQwJIhhwN/wUPLtq77ZVUfIS88u9gB3EQf9hqldwNCrbnPU180pefDZcdvl2yv2zK/8AM6/6a+YE1X0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/a805d/gtmgauid.webp 495w,\n/static/ede028f1638a83ae4f480cfce3ba9a4a/6ec60/gtmgauid.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/b3db0/gtmgauid.png 495w,\n/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png\"\n          alt=\"gtm ga uid\"\n          title=\"gtm ga uid\"\n          src=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">gtm ga uid</figcaption>\n  </figure>\n      </li>\n<li>完成後 -> 點選提交 (或是 預覽 測試後再提交)<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 761px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51.31313131313131%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzUlEQVQoz6WOzYrCMBhF877zToJ7H8Cl4MqVbkRmJWorrdrm+22allabzoyiODB0LmdxSHLJNdXvqetALyGdCHN0iCpffm5W8XZjuqu3lL4SF3C+KgqnWpTei7rM4u5cTub7xTo2xEzESIL8gFguwLuU9ildLB2T9BDFFuCUU5LLdJl9jE+jWW6SjC2pRcoBXwAMBCEC4u9DQhsELILZnmt0jToXPhS9g6w/Q/SxSHr/eiBqrn1YFZ6X/wXTtm3TtCwKPKjc5X/lwbMHl2+h+zgInJbq5wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/30d28ba4ac2f162672dd87efa004d21d/a805d/gtmgauidsubmit.webp 495w,\n/static/30d28ba4ac2f162672dd87efa004d21d/92222/gtmgauidsubmit.webp 761w\"\n          sizes=\"(max-width: 761px) 100vw, 761px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/30d28ba4ac2f162672dd87efa004d21d/b3db0/gtmgauidsubmit.png 495w,\n/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png 761w\"\n          sizes=\"(max-width: 761px) 100vw, 761px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png\"\n          alt=\"gtm ga uid submit\"\n          title=\"gtm ga uid submit\"\n          src=\"/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">gtm ga uid submit</figcaption>\n  </figure>\n      </li>\n</ul>\n<p>Tag manager 非常好用，會用的話可以不透過修改線上程式碼，處理許多問題、功能。</p>\n<h2 id=\"實際模擬-userid-設定\" style=\"position:relative;\"><a href=\"#%E5%AF%A6%E9%9A%9B%E6%A8%A1%E6%93%AC-userid-%E8%A8%AD%E5%AE%9A\" aria-label=\"實際模擬 userid 設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>實際模擬 UserId 設定</h2>\n<p>因為 blog 沒有會員系統，就先麻煩到我剛剛建好的頁面，是使用串接 facebook web sdk 登入。</p>\n<p>登入設定 userId : <a href=\"https://work.ianccy.com/getuid.html\" title=\"登入facebook 設定 userId\">登入 facebook 設定 userId</a></p>\n<p>進入畫面點擊登入後，我會把 facebook uId 設定到 cookie，之後我會將 cookie 的這個值，設定到 Google analytics UserId 中。</p>\n<p>因為 cookie 沒設定時間所以關掉視窗就會自動清掉了，別怕 XD。</p>\n<p>UserId google 政策小提醒:<br>\n<code class=\"language-text\">您不會上傳任何能讓 Google 識別個人身分的資料 (例如姓名、身分證字號、電子郵件地址等任何類似資料)，或是可永久識別某裝置的資料 (例如無法重設的手機專屬裝置識別碼)。</code></p>\n<h2 id=\"google-analytics-報表\" style=\"position:relative;\"><a href=\"#google-analytics-%E5%A0%B1%E8%A1%A8\" aria-label=\"google analytics 報表 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Google analytics 報表</h2>\n<p>接下來打開剛剛建立好的 GA 報表，點選 目標對象 -> 客層管理，就可以看到剛剛設定好的 UserId。點擊 UserId 即可看到詳細數據。</p>\n<ul>\n<li>UserId 清單<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 38.18181818181819%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA1UlEQVQY04WQ0W7DIAxF+f/f28se16UhyRoFDNjGNCVzEqXqpEw9ukLG8jVXGIAAIWYpSNxeVwY/sRTOotK+Sso9a/3U1lSZyfl1TgoR/wS62H64DY+DeZ5FBJEer9S6y8SEung329t0aW0mXg6qDm0rljNMQtoz6BbwPsVQSpF/YOb9xA3z3bSTD5MDp/KQWIhzOYOIuq6DEACg7/vWWnNtrXMuyz0huoiDR/XOZ6SUdpu+qZn1asZx9EMjpPF5/YrlDfUY0cJ8NvjxFUefIXJ97/3DL26/0KugK+ngAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/656c80fc7ad9cae312da246d7ad06f11/a805d/gauseridview.webp 495w,\n/static/656c80fc7ad9cae312da246d7ad06f11/6ec60/gauseridview.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/656c80fc7ad9cae312da246d7ad06f11/b3db0/gauseridview.png 495w,\n/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png\"\n          alt=\"ga userid view\"\n          title=\"ga userid view\"\n          src=\"/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">ga userid view</figcaption>\n  </figure>\n      </li>\n<li>使用者紀錄<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 44.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABBUlEQVQoz4VRW24DIQzk/mfpRapeoF/9qZQH7PIysLDY0EnSJh9V2tHsyFgzWGvUEIlFtiZzjN47C0P3votIv+JW3Pqo930nopxzSknNOV5e+e1D5hTnfeduLtCwOmdBuGMMOHrvoFqfvffMvG1Fcd/fP8sSJ/dmrT8cjkYvWpt1sYtZjVnW1aLvXHDurt9U+IIzc05MWNej96ecbc4r0QIFS7G/ib61p0u4lIKwCLfmczZE55Q0M42R5yxX3osHeycVI/2EhVlqbSkVojT/wxhDhRBvVmRrrbgIm8Qy8BfMnZ8DhsdknGOM2GQIAY8B3batPgc8Che0hpkTSvQI4xnrn8CkL32zB8BUE8FbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/a805d/gauseridinfo.webp 495w,\n/static/e03a2a49b60e0bc50b28b7f9459feef3/6ec60/gauseridinfo.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/b3db0/gauseridinfo.png 495w,\n/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png\"\n          alt=\"ga userid info\"\n          title=\"ga userid info\"\n          src=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">ga userid info</figcaption>\n  </figure>\n      </li>\n</ul>\n<p>假設你再搭配資料庫存取會員，就可以直接的看到所有會員的使用路徑，例如說，我希望看到下單的使用者，都看過哪些頁面的路徑，那你就可以依靠這方式觀察。</p>\n<h2 id=\"心得\" style=\"position:relative;\"><a href=\"#%E5%BF%83%E5%BE%97\" aria-label=\"心得 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>心得</h2>\n<p>滿詭異的，一開始報表沒出現 UserId，查網路解決方法查了很久，沒想到國外都說 ga 不會顯示 UserId…，滿臉問號。</p>\n<p>話說這功能我個人是覺得滿好用的，以前服務公司就有導入使用，可以更快理解、觀察出會員的需求，雖然聽起來滿沒有隱私，很怕被追蹤的話，記得開無痕登出瀏覽網站。</p>\n<p>感謝，有問題再歡迎留言詢問。</p>","frontmatter":{"title":"Google Analytics 自訂UserId 追蹤數據","date":"June 15, 2019","description":"分享一個google analytics滿好用的功能，設定User Id，可以讓你直接在報表上找出這個使用者的flow，包括停留時間等等詳細數據，假設你搭配會員系統給予id的話，你也能夠跨裝置的追蹤數據。","categories":"marketing","tags":["google_analytics"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5UlEQVQY02P4d0KGAQR+H5RhBDPc7zDUlOcxFpeUMZSWloJxSUkJIzKNJA6nQRgO/h1TZWSgAgAb+nevIhOI8/2ELN+PdpZZW4vMtVNLmnVrSvMEgLZzAzE7EKsAMR9QgyKQ5odiESgWBWJOoBwT3OT/N6K5/h5T2P93Ktv/uQluRnnlNbFlpcWZQIXJQFwAxNOBOASIfYHYH4izgTgOKhYBNCwSSMsgvHzGTOjfMaXorxPYff7rMDBHNUxirS3NZQXZClSoBMRSIHXQsGOGYj4gZgGqAbFZgBjiwv/nzBioBUAWAgATQnULJkHhbQAAAABJRU5ErkJggg==","aspectRatio":3.1192660550458715,"src":"/static/dfeae9b0c0de13cd6ed25543c36e7927/ee604/google_analytics.png","srcSet":"/static/dfeae9b0c0de13cd6ed25543c36e7927/c972b/google_analytics.png 340w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/27625/google_analytics.png 680w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/ee604/google_analytics.png 800w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"timeToRead":4,"parent":{"__typename":"File","modifiedTime":"2021-05-15T08:26:47.153Z"}}},"pageContext":{"slug":"/2019-06-gauserid/","previous":{"fields":{"slug":"/2019-06-firstjob/"},"frontmatter":{"title":"第一份工作","tags":[null]}},"next":{"fields":{"slug":"/2019-07-reactcontextapi/"},"frontmatter":{"title":"React Context API 跨元件傳遞資料","tags":["react.js"]}}}},"staticQueryHashes":["1481458783","63159454"]}