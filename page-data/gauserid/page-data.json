{"componentChunkName":"component---src-templates-blog-post-js","path":"/gauserid/","result":{"data":{"site":{"siteMetadata":{"title":"Ian Chu","author":"Ian Chu","siteUrl":"https://ianccy.com","social":{"facebook":"chu1228"}}},"markdownRemark":{"id":"dce9691e-01b6-582f-a6a5-a6d22a869be8","fields":{"slug":"/2019-06-gauserid/"},"headings":[{"value":"GA 設定 User ID","id":null,"depth":2},{"value":"針對使用者設定 UserId","id":null,"depth":2},{"value":"Tag manager 設定流程","id":null,"depth":3},{"value":"實際模擬 UserId 設定","id":null,"depth":2},{"value":"Google analytics 報表","id":null,"depth":2},{"value":"心得","id":null,"depth":2}],"excerpt":"分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。 Goolge 說明: 設定 User ID GA 設定 User ID GA…","html":"<p>分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。</p>\n<p>Goolge 說明: <a href=\"https://support.google.com/analytics/answer/3123666?hl=zh-Hant\" title=\"設定 User ID\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">設定 User ID</a></p>\n<h2>GA 設定 User ID</h2>\n<p>GA 點選左下角設定 => 點選 追蹤設定 => 點選 User Id => 點擊 同意條款 => 點選 下一步\n<img src=\"../images/gasettinguid.png\" alt=\"gasettinguid\" title=\"gasettinguid\"></p>\n<p>建立 User Id 報表\n<img src=\"../images/gasettinguid2.png\" alt=\"gasettinguid\" title=\"gasettinguid\"></p>\n<p>打開 顯示 User-id\n<img src=\"../images/gauserid3.png\" alt=\"gasettinguid\" title=\"gasettinguid\"></p>\n<p>這邊千萬千萬要記得要打開 UserId 的設定，否則你報表看不到客製化的 UserId 數據。我在這邊卡了 2 小時，查網路還找不到如何顯示的教學...。</p>\n<h2>針對使用者設定 UserId</h2>\n<p>接下來就需要定義使用者的 UserId，這邊有時候會用會員編號，不要使用敏感性個資去設定即可，能讓你在報表識別出這個人是誰就可以。</p>\n<pre><code class=\"language-javascript\">// 全域網站代碼的追蹤程式碼 (gtag.js)：\ngtag('set', { user_id: 'USER_ID' }); // 使用已登入的 user_id 設定 User ID。\n\n// 通用 Analytics (分析) 追蹤程式碼 (analytics.js)：\nga('set', 'userId', 'USER_ID'); // 使用已登入的 user_id 設定 User ID。\n</code></pre>\n<h3>Tag manager 設定流程</h3>\n<p>稍微提一下 tag manager 設定流程，首先我們需要建立一個變數，因為我 userId 是透過 cookie 傳遞的，所以我這邊先打開<code>變數</code>，點選使用者自定義區塊 -> 點選新增。</p>\n<ul>\n<li>選擇自訂 JavaScript\n<img src=\"../images/gtmuid.png\" alt=\"gtm uid\" title=\"gtm uid\"></li>\n<li>function return 代表的是這個變數的值。\n<img src=\"../images/gtmuidvar.png\" alt=\"gtm uid js\" title=\"gtm uid js\"></li>\n<li>點選 <code>代碼</code> -> 新增/編輯 GA pageView -> 點選 覆蓋變數設定 -> 點選 更多設定 -> 填入 userId 還有剛剛設定的 變數名稱\n<img src=\"../images/gtmgauid.png\" alt=\"gtm ga uid\" title=\"gtm ga uid\"></li>\n<li>完成後 -> 點選提交 (或是 預覽 測試後再提交)\n<img src=\"../images/gtmgauidsubmit.png\" alt=\"gtm ga uid submit\" title=\"gtm ga uid submit\"></li>\n</ul>\n<p>Tag manager 非常好用，會用的話可以不透過修改線上程式碼，處理許多問題、功能。</p>\n<h2>實際模擬 UserId 設定</h2>\n<p>因為 blog 沒有會員系統，就先麻煩到我剛剛建好的頁面，是使用串接 facebook web sdk 登入。</p>\n<p>登入設定 userId : <a href=\"https://work.ianccy.com/getuid.html\" title=\"登入facebook 設定 userId\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">登入 facebook 設定 userId</a></p>\n<p>進入畫面點擊登入後，我會把 facebook uId 設定到 cookie，之後我會將 cookie 的這個值，設定到 Google analytics UserId 中。</p>\n<p>因為 cookie 沒設定時間所以關掉視窗就會自動清掉了，別怕 XD。</p>\n<p>UserId google 政策小提醒:\n<code>您不會上傳任何能讓 Google 識別個人身分的資料 (例如姓名、身分證字號、電子郵件地址等任何類似資料)，或是可永久識別某裝置的資料 (例如無法重設的手機專屬裝置識別碼)。</code></p>\n<h2>Google analytics 報表</h2>\n<p>接下來打開剛剛建立好的 GA 報表，點選 目標對象 -> 客層管理，就可以看到剛剛設定好的 UserId。點擊 UserId 即可看到詳細數據。</p>\n<ul>\n<li>UserId 清單\n<img src=\"../images/gauseridview.png\" alt=\"ga userid view\" title=\"ga userid view\"></li>\n<li>使用者紀錄\n<img src=\"../images/gauseridinfo.png\" alt=\"ga userid info\" title=\"ga userid info\"></li>\n</ul>\n<p>假設你再搭配資料庫存取會員，就可以直接的看到所有會員的使用路徑，例如說，我希望看到下單的使用者，都看過哪些頁面的路徑，那你就可以依靠這方式觀察。</p>\n<h2>心得</h2>\n<p>滿詭異的，一開始報表沒出現 UserId，查網路解決方法查了很久，沒想到國外都說 ga 不會顯示 UserId...，滿臉問號。</p>\n<p>話說這功能我個人是覺得滿好用的，以前服務公司就有導入使用，可以更快理解、觀察出會員的需求，雖然聽起來滿沒有隱私，很怕被追蹤的話，記得開無痕登出瀏覽網站。</p>\n<p>感謝，有問題再歡迎留言詢問。</p>","frontmatter":{"title":"Google Analytics 自訂UserId 追蹤數據","date":"June 15, 2019","description":"分享一個google analytics滿好用的功能，設定User Id，可以讓你直接在報表上找出這個使用者的flow，包括停留時間等等詳細數據，假設你搭配會員系統給予id的話，你也能夠跨裝置的追蹤數據。","categories":"marketing","tags":["google_analytics"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5UlEQVQY02P4d0KGAQR+H5RhBDPc7zDUlOcxFpeUMZSWloJxSUkJIzKNJA6nQRgO/h1TZWSgAgAb+nevIhOI8/2ELN+PdpZZW4vMtVNLmnVrSvMEgLZzAzE7EKsAMR9QgyKQ5odiESgWBWJOoBwT3OT/N6K5/h5T2P93Ktv/uQluRnnlNbFlpcWZQIXJQFwAxNOBOASIfYHYH4izgTgOKhYBNCwSSMsgvHzGTOjfMaXorxPYff7rMDBHNUxirS3NZQXZClSoBMRSIHXQsGOGYj4gZgGqAbFZgBjiwv/nzBioBUAWAgATQnULJkHhbQAAAABJRU5ErkJggg==","aspectRatio":3.1192660550458715,"src":"/static/dfeae9b0c0de13cd6ed25543c36e7927/ee604/google_analytics.png","srcSet":"/static/dfeae9b0c0de13cd6ed25543c36e7927/c972b/google_analytics.png 340w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/27625/google_analytics.png 680w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/ee604/google_analytics.png 800w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"timeToRead":3,"parent":{"__typename":"File","modifiedTime":"2021-05-16T08:19:40.152Z"}}},"pageContext":{"slug":"/2019-06-gauserid/","previous":{"fields":{"slug":"/2019-06-firstjob/"},"frontmatter":{"title":"第一份工作","tags":[null]}},"next":{"fields":{"slug":"/2019-07-reactcontextapi/"},"frontmatter":{"title":"React Context API 跨元件傳遞資料","tags":["react.js"]}}}},"staticQueryHashes":["1481458783","63159454"]}