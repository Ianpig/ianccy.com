{"componentChunkName":"component---src-templates-blog-post-js","path":"/tagmanager/","result":{"data":{"site":{"siteMetadata":{"title":"Ian Chu","author":"Ian Chu","siteUrl":"https://ianccy.com","social":{"facebook":"chu1228"}}},"markdownRemark":{"id":"fb04b6ec-addd-5830-8fc2-39e2a2a472c0","fields":{"slug":"/2018-08-tagmanager/"},"headings":[{"value":"建立帳戶 埋設 Tag Manager traking code","id":"建立帳戶-埋設-tag-manager-traking-code","depth":2},{"value":"Tag manager 設定 google analytics tracking code","id":"tag-manager-設定-google-analytics-tracking-code","depth":2},{"value":"進入代碼區塊 點擊新增","id":"進入代碼區塊-點擊新增","depth":4},{"value":"選擇 google analytics","id":"選擇-google-analytics","depth":4},{"value":"點選上半部變數區塊 => 加入你 google analytics 的追蹤碼 UA-xxxxxxxx-x","id":"點選上半部變數區塊--加入你-google-analytics-的追蹤碼-ua-xxxxxxxx-x","depth":4},{"value":"點選下半部觸發區塊 => 選擇 All page view","id":"點選下半部觸發區塊--選擇-all-page-view","depth":4},{"value":"點擊右上角提交","id":"點擊右上角提交","depth":4},{"value":"首先先點擊左邊選單的 變數，讓我們後面可以取用點擊連結的 URL","id":"首先先點擊左邊選單的-變數，讓我們後面可以取用點擊連結的-url","depth":4},{"value":"點擊左邊選單的 觸發條件 => 新增 => 觸發條件設定 => 點選連結","id":"點擊左邊選單的-觸發條件--新增--觸發條件設定--點選連結","depth":4},{"value":"選擇內建變數","id":"選擇內建變數","depth":4},{"value":"選擇 click target => 儲存","id":"選擇-click-target--儲存","depth":4},{"value":"點擊左邊選單的 代碼 => 選擇 google analytics => 點擊上半部區塊代碼設定","id":"點擊左邊選單的-代碼--選擇-google-analytics--點擊上半部區塊代碼設定","depth":4},{"value":"點擊下半部區塊代碼設定 => 選擇剛剛設定好的觸發條件","id":"點擊下半部區塊代碼設定--選擇剛剛設定好的觸發條件","depth":4},{"value":"點擊提交","id":"點擊提交","depth":4},{"value":"點擊預覽模式 => 進入網頁測試","id":"點擊預覽模式--進入網頁測試","depth":4},{"value":"Tag Manager 結論重點","id":"tag-manager-結論重點","depth":2}],"excerpt":"Tag manager 是一個強大的程式碼管理容器，一個代碼管理中心的概念，提醒一下它並不是取代 google analytics，而是涵蓋著處理各種代碼的設定，包括 google analytics 以及各種 tracking code、或是 html 等等。功能非常的強大，因此寫錯 script 或 css…","html":"<p>Tag manager 是一個強大的程式碼管理容器，一個代碼管理中心的概念，提醒一下它並不是取代 google analytics，而是涵蓋著處理各種代碼的設定，包括 google analytics 以及各種 tracking code、或是 html 等等。功能非常的強大，因此寫錯 script 或 css 就可能讓你網站出問題。</p>\n<!--- ![google tagmanager](../images/tagmanager.png \"google tagmanager\") --->\n<p>以往的埋設追蹤碼都是增加一段 script，但是當你有用了 tag manager，這段 script 可以轉由 tag manager 幫你引入，由 tag manager 來控管 tracking code，假設你是行銷人員，就不用在請程式人員幫你埋碼了。</p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">// 傳統 google analytics tacking code\n&lt;script&gt;(function(i,s,o,g,r,a,m){i[&#39;GoogleAnalyticsObject&#39;]=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,&#39;script&#39;,&#39;https://www.google-analytics.com/analytics.js&#39;,&#39;ga&#39;);\nga(&#39;create&#39;,&#39;UA-xxxxxxxxxx-1&#39;,&#39;auto&#39;);ga(&#39;send&#39;,&#39;pageview&#39;);&lt;/script&gt;\n\n// 以上這段code會變成你在tag manager 選擇google analytics，貼上UA-xxxxxxxxxxx-1。\n// 如果沒有支援就改成用html方式引入code</code>\n        </deckgo-highlight-code>\n<h2 id=\"建立帳戶-埋設-tag-manager-traking-code\" style=\"position:relative;\"><a href=\"#%E5%BB%BA%E7%AB%8B%E5%B8%B3%E6%88%B6-%E5%9F%8B%E8%A8%AD-tag-manager-traking-code\" aria-label=\"建立帳戶 埋設 tag manager traking code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>建立帳戶 埋設 Tag Manager traking code</h2>\n<p>進入 <a href=\"https://tagmanager.google.com/\" title=\"tag manager\">google tag manager</a> 網站註冊登入，點選建立帳戶，接下來會彈出一段程式碼。</p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">&lt;!DOCTYPE html&gt;\n\n...\n// 將這段script 放到網站的&lt;head&gt;前面\n&lt;!-- Google Tag Manager --&gt;\n&lt;script&gt;(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({&#39;gtm.start&#39;:\nnew Date().getTime(),event:&#39;gtm.js&#39;});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!=&#39;dataLayer&#39;?&#39;&amp;l=&#39;+l:&#39;&#39;;j.async=true;j.src=\n&#39;https://www.googletagmanager.com/gtm.js?id=&#39;+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,&#39;script&#39;,&#39;dataLayer&#39;,&#39;GTM-你的追蹤碼&#39;);&lt;/script&gt;\n&lt;!-- End Google Tag Manager --&gt;\n&lt;head&gt;\n...</code>\n        </deckgo-highlight-code>\n<p>恭喜你，基本上後面動作你就不需要動到 html 了。除非要做 data layer 的設定。<br>\n<a href=\"https://developers.google.com/tag-manager/devguide\" title=\"tag manager data layer\">tag manager data layer 說明文件</a></p>\n<h2 id=\"tag-manager-設定-google-analytics-tracking-code\" style=\"position:relative;\"><a href=\"#tag-manager-%E8%A8%AD%E5%AE%9A-google-analytics-tracking-code\" aria-label=\"tag manager 設定 google analytics tracking code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tag manager 設定 google analytics tracking code</h2>\n<p>tag manager 有整合進 google analytics 的設定，</p>\n<h4 id=\"進入代碼區塊-點擊新增\" style=\"position:relative;\"><a href=\"#%E9%80%B2%E5%85%A5%E4%BB%A3%E7%A2%BC%E5%8D%80%E5%A1%8A-%E9%BB%9E%E6%93%8A%E6%96%B0%E5%A2%9E\" aria-label=\"進入代碼區塊 點擊新增 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>進入代碼區塊 點擊新增</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb3210a6482a0b43b8b2627ad7ec1cea/acfc1/tagadd.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 42.82828282828282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqElEQVQoz6WPwQrDIBBE/f+fKvQPSk/tTVqaknXjRhajJjHZJC006aGQPgZdlJlRVQAhIhgESzWzJZL9p6gWOVUUT+ccADyuF3O/obVYoaj6Yjl/CbEsS0VETdOw9/Xx4M+nQch5XnLf93lmGYYPuq6TPiUB1spjaXPtvWfmEMIUzdy27cZsjFFaa8mQKcWQYkxv4pq0RhKn5sW8j8kstTvN8uf9zfAHI4zo+asi6pC8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/bb3210a6482a0b43b8b2627ad7ec1cea/a805d/tagadd.webp 495w,\n/static/bb3210a6482a0b43b8b2627ad7ec1cea/6ec60/tagadd.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/bb3210a6482a0b43b8b2627ad7ec1cea/b3db0/tagadd.png 495w,\n/static/bb3210a6482a0b43b8b2627ad7ec1cea/acfc1/tagadd.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/bb3210a6482a0b43b8b2627ad7ec1cea/acfc1/tagadd.png\"\n          alt=\"google tagmanager add\"\n          title=\"google tagmanager add\"\n          src=\"/static/bb3210a6482a0b43b8b2627ad7ec1cea/acfc1/tagadd.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager add</figcaption>\n  </figure>\n      </p>\n<h4 id=\"選擇-google-analytics\" style=\"position:relative;\"><a href=\"#%E9%81%B8%E6%93%87-google-analytics\" aria-label=\"選擇 google analytics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>選擇 google analytics</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/aae8d3ada6b8370d75f3a122baf0fc37/acfc1/tagsetga.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50.909090909090914%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABH0lEQVQoz12RW3dEMBSF/f+/1nkgCQnVqcuiGJeJVcTqot1hTGO+pzg5O/tsx/rcuBp8bFzPoBLH8TCOeZ5XZfW7YVFKOee4Cw92cXiGaoiU3TCM3xvTNFlBEMQGSZIIISDGwaxrqWO3t68o0j1N03RdZ+FVsw8RLpc313XTND2LCaFMDlPbNPB8jP0ixqeDHD7GiV6dCe1lX5Zl3/dQrutqEUI8z+MHvhBcBEL4/Ixt29BL2dd1/e8MJdzwdrSBscPwHZkjA9wy/cPc9q7qW7Usy8MZazDHxhmZOffMzChSxlxGf9RQFEWWZfM8a2eI0ZccYEc2cnAfozyLaGBMeys1zhu7uaVzGuCTuRxqLOxZxDodx8EKlFLYMAbeM/8B/Q0SC77+7oIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/aae8d3ada6b8370d75f3a122baf0fc37/a805d/tagsetga.webp 495w,\n/static/aae8d3ada6b8370d75f3a122baf0fc37/6ec60/tagsetga.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/aae8d3ada6b8370d75f3a122baf0fc37/b3db0/tagsetga.png 495w,\n/static/aae8d3ada6b8370d75f3a122baf0fc37/acfc1/tagsetga.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/aae8d3ada6b8370d75f3a122baf0fc37/acfc1/tagsetga.png\"\n          alt=\"google tagmanager tag set ga\"\n          title=\"google tagmanager tag set ga\"\n          src=\"/static/aae8d3ada6b8370d75f3a122baf0fc37/acfc1/tagsetga.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager tag set ga</figcaption>\n  </figure>\n      </p>\n<h4 id=\"點選上半部變數區塊--加入你-google-analytics-的追蹤碼-ua-xxxxxxxx-x\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E9%81%B8%E4%B8%8A%E5%8D%8A%E9%83%A8%E8%AE%8A%E6%95%B8%E5%8D%80%E5%A1%8A--%E5%8A%A0%E5%85%A5%E4%BD%A0-google-analytics-%E7%9A%84%E8%BF%BD%E8%B9%A4%E7%A2%BC-ua-xxxxxxxx-x\" aria-label=\"點選上半部變數區塊  加入你 google analytics 的追蹤碼 ua xxxxxxxx x permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點選上半部變數區塊 => 加入你 google analytics 的追蹤碼 UA-xxxxxxxx-x</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3192c985e1f1a821cb913d33fe5555a7/acfc1/tagvar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 39.7979797979798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAApklEQVQY05WQSQ6DMAwA+f+v+gc+UC6QxQ5FgRiCQ93Q0h4IUucQybInXioiaprGGMPM67oumVhGktsW6zvd6rESDREBwFrT924X5+UcSXnvtdYIxqF5yRLIowxa9GHy0zSmlLYCIYRcL1aWM9qCU+DhMXpi7IfEfC0Lb1liQByk6xwpMoDjv2TnnFwjN0xEoTT5ibz7bdt2nfqsVORQvvLxxTW/xU97vsdKw+54kgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/3192c985e1f1a821cb913d33fe5555a7/a805d/tagvar.webp 495w,\n/static/3192c985e1f1a821cb913d33fe5555a7/6ec60/tagvar.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/3192c985e1f1a821cb913d33fe5555a7/b3db0/tagvar.png 495w,\n/static/3192c985e1f1a821cb913d33fe5555a7/acfc1/tagvar.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/3192c985e1f1a821cb913d33fe5555a7/acfc1/tagvar.png\"\n          alt=\"google tagmanager tag tag var\"\n          title=\"google tagmanager tag var\"\n          src=\"/static/3192c985e1f1a821cb913d33fe5555a7/acfc1/tagvar.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager tag var</figcaption>\n  </figure>\n      </p>\n<h4 id=\"點選下半部觸發區塊--選擇-all-page-view\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E9%81%B8%E4%B8%8B%E5%8D%8A%E9%83%A8%E8%A7%B8%E7%99%BC%E5%8D%80%E5%A1%8A--%E9%81%B8%E6%93%87-all-page-view\" aria-label=\"點選下半部觸發區塊  選擇 all page view permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點選下半部觸發區塊 => 選擇 All page view</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f97fdf73154b13751464811a3ee42d61/acfc1/tagtrigger.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 36.16161616161616%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAAgElEQVQY052NywrDIBBF/f/PMxm1WLUoWXRVgg+sqBOhdJHSTTyLYeDewyUrgJTyYfT23GN6I/YfvPelFPwGOefW2ucnN6DLQgHgtfvecQR4ptY6evgPAiu9S6mUijHiRQhjnDE2lmdkzrkQYtwQwoystTbGzCw756y1Q04pXZUPKsiXm11nFHIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/f97fdf73154b13751464811a3ee42d61/a805d/tagtrigger.webp 495w,\n/static/f97fdf73154b13751464811a3ee42d61/6ec60/tagtrigger.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/f97fdf73154b13751464811a3ee42d61/b3db0/tagtrigger.png 495w,\n/static/f97fdf73154b13751464811a3ee42d61/acfc1/tagtrigger.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/f97fdf73154b13751464811a3ee42d61/acfc1/tagtrigger.png\"\n          alt=\"google tagmanager tag trigger\"\n          title=\"google tagmanager tag trigger\"\n          src=\"/static/f97fdf73154b13751464811a3ee42d61/acfc1/tagtrigger.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager tag trigger</figcaption>\n  </figure>\n      </p>\n<h4 id=\"點擊右上角提交\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E6%93%8A%E5%8F%B3%E4%B8%8A%E8%A7%92%E6%8F%90%E4%BA%A4\" aria-label=\"點擊右上角提交 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點擊右上角提交</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be6bc4351c19a4efc039b7eed64753c8/ccd65/tagsubmit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 790px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 68.68686868686868%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAAuUlEQVQoz+WOsQ6CMBCG+/6TiS9ijKuDJq7GERcalRbaK7RCaEs7YBFZDA7A6Jcvd9fm/uRQ8wPnGu+66pzz3ruBOMbW1If9ri4LpLUZFaQhYEBZpZ5JQgoZenmNogcV661cbSRIjRjnQc7hy5QBybqaMUYozTIWxBjf7snpkh7PhKYc5bmAMcRgN4vPTh62hSgVlKr7QsZarTVMoT8tgNq2tdby/jWRZWFjTFVVMAvE38wMwwL+MfwCuvkFvRMQfN8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/be6bc4351c19a4efc039b7eed64753c8/a805d/tagsubmit.webp 495w,\n/static/be6bc4351c19a4efc039b7eed64753c8/3dfc2/tagsubmit.webp 790w\"\n          sizes=\"(max-width: 790px) 100vw, 790px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/be6bc4351c19a4efc039b7eed64753c8/b3db0/tagsubmit.png 495w,\n/static/be6bc4351c19a4efc039b7eed64753c8/ccd65/tagsubmit.png 790w\"\n          sizes=\"(max-width: 790px) 100vw, 790px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/be6bc4351c19a4efc039b7eed64753c8/ccd65/tagsubmit.png\"\n          alt=\"google tagmanager tag submit\"\n          title=\"google tagmanager tag submit\"\n          src=\"/static/be6bc4351c19a4efc039b7eed64753c8/ccd65/tagsubmit.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager tag submit</figcaption>\n  </figure>\n      </p>\n<p>記住一個重點，tag manager 每個改動都需要你點擊提交，才算是真正送出修改，如果要先觀看有沒有問題，可以點擊預覽，進入有埋設 tag manager 的網站，下方會跳出介面，會列出有在執行項目。</p>\n<p>以上就是成功用 tag manager 埋好了 google analytics，那接下來開始介紹一個強大的功能，直接靠 tag manager 建立事件。我要追蹤的是 click target=”_blank”的連結(因為有處理過會把外部連結設為開新視窗)。</p>\n<h4 id=\"首先先點擊左邊選單的-變數，讓我們後面可以取用點擊連結的-url\" style=\"position:relative;\"><a href=\"#%E9%A6%96%E5%85%88%E5%85%88%E9%BB%9E%E6%93%8A%E5%B7%A6%E9%82%8A%E9%81%B8%E5%96%AE%E7%9A%84-%E8%AE%8A%E6%95%B8%EF%BC%8C%E8%AE%93%E6%88%91%E5%80%91%E5%BE%8C%E9%9D%A2%E5%8F%AF%E4%BB%A5%E5%8F%96%E7%94%A8%E9%BB%9E%E6%93%8A%E9%80%A3%E7%B5%90%E7%9A%84-url\" aria-label=\"首先先點擊左邊選單的 變數，讓我們後面可以取用點擊連結的 url permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>首先先點擊左邊選單的 變數，讓我們後面可以取用點擊連結的 URL</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e948ddcae64020aa57ed5eeadf3be6e9/acfc1/tagopenvar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 42.82828282828282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABIUlEQVQoz3WRzW6EIBSFff9nmbQvMZsGYZRBQUQQm07iri78GxvbIxPrdNEvd0EC555zLxGhF1UobUyh9X+lyzKT8uN267qubdt1Xb8DUcJ5TOnb+ZxspFuloZKj0pQTEtfej+O4LAtkayDK8zwTV/pyMnleWVtVFcyMKasnrLVCCO/9MAzzPB/izY5zVVR1AC+UUujYNE29g7OU0jm3BNadiBCCVEo7a3Hr8DTMWOLgdtAR7dC573skP5zjOIa4KD3uHs5QImf9BJyVktq8f3b9PE+HmDFGKSMsvQohA1mWcc5hJXcwCPZmnb8vX+CIDfGFUfZ6UjwtjdEBmOudotg+C+0Q7B7444yd8ZhJCe22WPjAHJrHnnGG+e/M03TE/gGQ9NpxKyViNgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/e948ddcae64020aa57ed5eeadf3be6e9/a805d/tagopenvar.webp 495w,\n/static/e948ddcae64020aa57ed5eeadf3be6e9/6ec60/tagopenvar.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/e948ddcae64020aa57ed5eeadf3be6e9/b3db0/tagopenvar.png 495w,\n/static/e948ddcae64020aa57ed5eeadf3be6e9/acfc1/tagopenvar.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/e948ddcae64020aa57ed5eeadf3be6e9/acfc1/tagopenvar.png\"\n          alt=\"google tagmanager tag openvar\"\n          title=\"google tagmanager openvar\"\n          src=\"/static/e948ddcae64020aa57ed5eeadf3be6e9/acfc1/tagopenvar.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager openvar</figcaption>\n  </figure>\n      </p>\n<h4 id=\"點擊左邊選單的-觸發條件--新增--觸發條件設定--點選連結\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E6%93%8A%E5%B7%A6%E9%82%8A%E9%81%B8%E5%96%AE%E7%9A%84-%E8%A7%B8%E7%99%BC%E6%A2%9D%E4%BB%B6--%E6%96%B0%E5%A2%9E--%E8%A7%B8%E7%99%BC%E6%A2%9D%E4%BB%B6%E8%A8%AD%E5%AE%9A--%E9%BB%9E%E9%81%B8%E9%80%A3%E7%B5%90\" aria-label=\"點擊左邊選單的 觸發條件  新增  觸發條件設定  點選連結 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點擊左邊選單的 觸發條件 => 新增 => 觸發條件設定 => 點選連結</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ca3e00323101235a0da180bc0d837b9e/acfc1/tagtrigerset.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 46.868686868686865%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAArUlEQVQoz42Q2QqDMBBF/f+v1KDG7GbXmqadJiBSkHie7gwchrkdQkhKyRjjnEshBOcxxq2FUgqUbhgGUCjIjC3SyNUcx/FpobWmlHbjOMLNU2ZCvvb9qTxNE8isoJWCVQgxvXNKqS3Dz1WGwVrrnLPWG7dZY3LODbnve/i5Xl4L3vstxhrgPlQAFYYQUgGCKvzLhBCMMSksF3DhzPM8g/lr+yrfwQvXsYZH8h1fkVD9WoPOqRMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/ca3e00323101235a0da180bc0d837b9e/a805d/tagtrigerset.webp 495w,\n/static/ca3e00323101235a0da180bc0d837b9e/6ec60/tagtrigerset.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/ca3e00323101235a0da180bc0d837b9e/b3db0/tagtrigerset.png 495w,\n/static/ca3e00323101235a0da180bc0d837b9e/acfc1/tagtrigerset.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/ca3e00323101235a0da180bc0d837b9e/acfc1/tagtrigerset.png\"\n          alt=\"google tagmanager tag trigerset\"\n          title=\"google tagmanager trigerset\"\n          src=\"/static/ca3e00323101235a0da180bc0d837b9e/acfc1/tagtrigerset.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager trigerset</figcaption>\n  </figure>\n      </p>\n<h4 id=\"選擇內建變數\" style=\"position:relative;\"><a href=\"#%E9%81%B8%E6%93%87%E5%85%A7%E5%BB%BA%E8%AE%8A%E6%95%B8\" aria-label=\"選擇內建變數 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>選擇內建變數</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3bb3df2dea641c0ba9f9e17a76ca95d8/acfc1/tagdefault.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 41.41414141414141%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAAyUlEQVQY052OywrCMBBF+/9fIrhx68KdoHUhKorY+khbkyaZyatqi4WiqW4EFxYPw4U7cIYJAOT1dlPGGmPdpTLugqjLsnx80DTNdy2KIgCAU5ItN1GS8ZRyypFQ0MbWdX1/UVWVc87nu/q91hoRrbWtvN/HszCMo12WEqVACM4Yy3/BOQ/8jcORLFbrXKBUTqBluZBSQgcCBBjNz4Pxcbg0/dD2pm6yBYOii92+nWQ0PhCfJGWnhFHGETrRykqhVj7wPR7oLv/NEyrPuEYriw+oAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/3bb3df2dea641c0ba9f9e17a76ca95d8/a805d/tagdefault.webp 495w,\n/static/3bb3df2dea641c0ba9f9e17a76ca95d8/6ec60/tagdefault.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/3bb3df2dea641c0ba9f9e17a76ca95d8/b3db0/tagdefault.png 495w,\n/static/3bb3df2dea641c0ba9f9e17a76ca95d8/acfc1/tagdefault.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/3bb3df2dea641c0ba9f9e17a76ca95d8/acfc1/tagdefault.png\"\n          alt=\"google tagmanager tag default\"\n          title=\"google tagmanager tag default\"\n          src=\"/static/3bb3df2dea641c0ba9f9e17a76ca95d8/acfc1/tagdefault.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager tag default</figcaption>\n  </figure>\n      </p>\n<h4 id=\"選擇-click-target--儲存\" style=\"position:relative;\"><a href=\"#%E9%81%B8%E6%93%87-click-target--%E5%84%B2%E5%AD%98\" aria-label=\"選擇 click target  儲存 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>選擇 click target => 儲存</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f96a084f8fb925f5756b7a84fb9647a1/acfc1/tagtarget.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 28.28282828282828%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAkklEQVQY021QWw7DIAzj/udEAtG1TIxHeM8TEypt/eUktkNg+/EmCr33dkIpxTk3muBKqZTSRQMwa32r9dKFIYR/Yq1Va51zbjcwte05p3MLHkiNMXOzlPLZ/LG+lNxXYBsRDQ4RghDRb/htxs1pBZzjqYNzzvEFo4wxThnbXgfOoxXee5ihA8dUCGGtHSVGU/YFbZpfpM5dvIwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/f96a084f8fb925f5756b7a84fb9647a1/a805d/tagtarget.webp 495w,\n/static/f96a084f8fb925f5756b7a84fb9647a1/6ec60/tagtarget.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/f96a084f8fb925f5756b7a84fb9647a1/b3db0/tagtarget.png 495w,\n/static/f96a084f8fb925f5756b7a84fb9647a1/acfc1/tagtarget.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/f96a084f8fb925f5756b7a84fb9647a1/acfc1/tagtarget.png\"\n          alt=\"google tagmanager tag target\"\n          title=\"google tagmanager tag target\"\n          src=\"/static/f96a084f8fb925f5756b7a84fb9647a1/acfc1/tagtarget.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager tag target</figcaption>\n  </figure>\n      </p>\n<h4 id=\"點擊左邊選單的-代碼--選擇-google-analytics--點擊上半部區塊代碼設定\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E6%93%8A%E5%B7%A6%E9%82%8A%E9%81%B8%E5%96%AE%E7%9A%84-%E4%BB%A3%E7%A2%BC--%E9%81%B8%E6%93%87-google-analytics--%E9%BB%9E%E6%93%8A%E4%B8%8A%E5%8D%8A%E9%83%A8%E5%8D%80%E5%A1%8A%E4%BB%A3%E7%A2%BC%E8%A8%AD%E5%AE%9A\" aria-label=\"點擊左邊選單的 代碼  選擇 google analytics  點擊上半部區塊代碼設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點擊左邊選單的 代碼 => 選擇 google analytics => 點擊上半部區塊[代碼設定]</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac0d1246a34d6de3ea9279c2d3ed23ac/acfc1/tagevent.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 79.39393939393939%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAAA20lEQVQoz5WT0RKDIAwE/f8PVbGjCAhaVNptM3Xsi0IeGAmuSY6zssZ0XTdNU4zxeYp4Geu6glTOucmHtO+v7Egpsc7zXHk7LuahuodE3/daaw6yYOesd6MPYVkWuqWfbdvk+B621g5ayz59g5Fy2/7Aw8D0+y+oXAB77wUjxVfquj7euIflnoDJkkKwgsohBHQSmGcEL4CluLTNCHgmF8YkYqmjbfQrgM8iU7lpmgLBjDEIRuq4rYKZGRidWNlDlpmEu0Ek8Tay49Nrn/zNDK+UatsWeM/4vQ74DfL/ri7gs5pSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/ac0d1246a34d6de3ea9279c2d3ed23ac/a805d/tagevent.webp 495w,\n/static/ac0d1246a34d6de3ea9279c2d3ed23ac/6ec60/tagevent.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/ac0d1246a34d6de3ea9279c2d3ed23ac/b3db0/tagevent.png 495w,\n/static/ac0d1246a34d6de3ea9279c2d3ed23ac/acfc1/tagevent.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/ac0d1246a34d6de3ea9279c2d3ed23ac/acfc1/tagevent.png\"\n          alt=\"google tagmanager event setting\"\n          title=\"google tagmanager event setting\"\n          src=\"/static/ac0d1246a34d6de3ea9279c2d3ed23ac/acfc1/tagevent.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager event setting</figcaption>\n  </figure>\n      </p>\n<h4 id=\"點擊下半部區塊代碼設定--選擇剛剛設定好的觸發條件\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E6%93%8A%E4%B8%8B%E5%8D%8A%E9%83%A8%E5%8D%80%E5%A1%8A%E4%BB%A3%E7%A2%BC%E8%A8%AD%E5%AE%9A--%E9%81%B8%E6%93%87%E5%89%9B%E5%89%9B%E8%A8%AD%E5%AE%9A%E5%A5%BD%E7%9A%84%E8%A7%B8%E7%99%BC%E6%A2%9D%E4%BB%B6\" aria-label=\"點擊下半部區塊代碼設定  選擇剛剛設定好的觸發條件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點擊下半部區塊[代碼設定] => 選擇剛剛設定好的觸發條件</h4>\n<p>\n  <figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3c566a19ab6759549ecb1168a96fdfc7/acfc1/tagevent2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 45.05050505050505%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAAt0lEQVQoz52QzQ6CMBCE+/5vh22hFglFWw14EahBKVLHHkzjX4LfYZPddjKzS6pAURRN09i+L8uy6zrv/S1imqaXdg4QyliWZZs83+0Px/4MPZ59BNphGOKJtRYT5xyRIhNCyLXIt/vqdHWXx785AuK2bVGfk3EcIUYlgq84gz3T2sxB5t9ATv8JkqZp2FphZ78QgsxKKdypruvFYgSWUv4pRmxKaZIkWmv/ZedfseHMOTfGLHW+A7eoCPXqemuoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/3c566a19ab6759549ecb1168a96fdfc7/a805d/tagevent2.webp 495w,\n/static/3c566a19ab6759549ecb1168a96fdfc7/6ec60/tagevent2.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/3c566a19ab6759549ecb1168a96fdfc7/b3db0/tagevent2.png 495w,\n/static/3c566a19ab6759549ecb1168a96fdfc7/acfc1/tagevent2.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/3c566a19ab6759549ecb1168a96fdfc7/acfc1/tagevent2.png\"\n          alt=\"google tagmanager event setting 2\"\n          title=\"google tagmanager event setting 2\"\n          src=\"/static/3c566a19ab6759549ecb1168a96fdfc7/acfc1/tagevent2.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager event setting 2</figcaption>\n  </figure>\n      </p>\n<h4 id=\"點擊提交\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E6%93%8A%E6%8F%90%E4%BA%A4\" aria-label=\"點擊提交 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點擊提交</h4>\n<h4 id=\"點擊預覽模式--進入網頁測試\" style=\"position:relative;\"><a href=\"#%E9%BB%9E%E6%93%8A%E9%A0%90%E8%A6%BD%E6%A8%A1%E5%BC%8F--%E9%80%B2%E5%85%A5%E7%B6%B2%E9%A0%81%E6%B8%AC%E8%A9%A6\" aria-label=\"點擊預覽模式  進入網頁測試 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>點擊預覽模式 => 進入網頁測試</h4>\n<p>首先點擊網頁上的開新視窗連結，在觀察下方的介面有沒有 fired on this page<br>\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n  \n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b5f2072d6c18b56663637bb9d2877349/acfc1/tagtest.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 33.93939393939394%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2UlEQVQY04WQ22rFIBBF/f9/LIWCiSfexnuMJjlbA+1DC12o6Mwsx4TllHLGkkoprbVaDxzL5PgPJjel1cA5MpS1jd5RCN4513tvE9T9bKb2HJk0sda91hpC/PjkX1zCJxdiDH4SkIgpYiaMsQFPnCkpod73jevERpZSSC2XY7Y5Wu8Q5ASvE6vYNmmNRWrIC1/wkZBbb4SwUd4TkQHejcejaJhSaa2FeGmljbHojP4Mieu6IONXcUFcuEW49QWLxiTyf/Fcys7zvCf7vq9CIkhzfIM6+wszeQOho49HBWfE0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/b5f2072d6c18b56663637bb9d2877349/a805d/tagtest.webp 495w,\n/static/b5f2072d6c18b56663637bb9d2877349/6ec60/tagtest.webp 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/b5f2072d6c18b56663637bb9d2877349/b3db0/tagtest.png 495w,\n/static/b5f2072d6c18b56663637bb9d2877349/acfc1/tagtest.png 800w\"\n          sizes=\"(max-width: 800px) 100vw, 800px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/b5f2072d6c18b56663637bb9d2877349/acfc1/tagtest.png\"\n          alt=\"google tagmanager tag test\"\n          title=\"google tagmanager tag test\"\n          src=\"/static/b5f2072d6c18b56663637bb9d2877349/acfc1/tagtest.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n  <figcaption class=\"gatsby-resp-image-figcaption\">google tagmanager tag test</figcaption>\n  </figure>\n      </p>\n<p>woooooooo，這樣就完成了一個 google analytics 的事件追蹤設定。</p>\n<h2 id=\"tag-manager-結論重點\" style=\"position:relative;\"><a href=\"#tag-manager-%E7%B5%90%E8%AB%96%E9%87%8D%E9%BB%9E\" aria-label=\"tag manager 結論重點 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tag Manager 結論重點</h2>\n<p>tag manager 核心邏輯大概是 變數、觸發條件、代碼。變數可以把它看作設定的某個數值，觸發條件則是觸發的原因，代碼則是整合觸發條件還有變數。每個代碼都必須要有觸發條件，例如 google analytic 就是在網頁瀏覽觸發，要讓程式碼知道你這段代碼要在什麼時候執行。至於變數則是沒有一定要加，視狀況而定。</p>\n<p>另外介紹目前公司針對不同客戶的客製化代碼，都是在 tag manager 設定的。例如某個客戶要客製化的 html，就用代碼判斷這個客戶的網址，利用代碼引入 javaScipt，動態的載入 html。</p>\n<p>最後想說 tag manager 對於行銷人來說，似乎有點複雜，以前我擔任行銷時，其實也不太會用，用得好的話需要有 html、JavaScript 邏輯，有些公司甚至是前端工程師專門維運 tag manager 的，所以如果你覺得很難理解或使用應該是滿正常的，但如果你會用的話，恭喜你，tag manager 會是非常厲害的求職技能。</p>\n<p>以上是 tag manager 的介紹，關於設定流程有問題歡迎留言。</p>","frontmatter":{"title":"Google Tag Manager tracking code 安裝追蹤碼","date":"August 26, 2018","description":"Google Tag manager 是一個強大的程式碼管理容器，一個代碼管理中心的概念，涵蓋著處理各種代碼的設定。接下來就開始介紹功能，靠tag manager建立事件。我要追蹤的是click的連結。","categories":"marketing","tags":["tag_manager","google_analytics"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAA4UlEQVQoz6VSSw6CMBDljJ7CvS7cegN3xiO4dWliWBMSSKgoYcGvCZDSNMSAoXyKLSYV3SGTpp3X6etM31TpZ5jyXtgwJpMlR/DZ5wY2mHQk7EfHRGav6HYOzStBb9t2Quao7Nb3enl+ro4Uxlnge2maZlkGIQyCACHEnTzPwzD0fZ9DHsIYJ0lSFIWCKNuY5WKPt6caYXKzbQCuAABVVU3TJIRYlmUYRhzHfNNxHNd1NU3TdV2QefYI14fLo2qYfA+fKaWyvKZpxtVKqEid2UibH2F+9PtqFYcd+6tVcz7JC9FpQhumICOXAAAAAElFTkSuQmCC","aspectRatio":2.035928143712575,"src":"/static/c964d1cfd4f170bf443f61ca8da3d695/20530/tagmanager.png","srcSet":"/static/c964d1cfd4f170bf443f61ca8da3d695/c972b/tagmanager.png 340w,\n/static/c964d1cfd4f170bf443f61ca8da3d695/27625/tagmanager.png 680w,\n/static/c964d1cfd4f170bf443f61ca8da3d695/20530/tagmanager.png 785w","sizes":"(max-width: 785px) 100vw, 785px"}}}},"timeToRead":9,"parent":{"__typename":"File","modifiedTime":"2021-05-16T05:03:08.982Z"}}},"pageContext":{"slug":"/2018-08-tagmanager/","previous":{"fields":{"slug":"/2018-08-jsproto/"},"frontmatter":{"title":"JavaScript Prototype 繼承、原型鏈 Prototype chain","tags":["javascript","prototype"]}},"next":{"fields":{"slug":"/2018-09-postmessage/"},"frontmatter":{"title":"HTML postMessage iframe and open window 跨視窗傳訊用法","tags":["javascript"]}}}},"staticQueryHashes":["1481458783","63159454"]}